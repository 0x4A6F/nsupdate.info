{% extends "base.html" %}
{% load bootstrap %}

{% block content %}
    <div class="row">
        <div class="col-lg-12">
            <h3>Your Hosts</h3>
            <table class="table">
            <tr><th>Host</th><th>IPv4 Address</th><th>IPv6 Address</th><th>Comment</th></tr>
            {% for host in hosts %}
                <tr>
                    <td><a href="{% url 'host_view' host.pk %}"><b>{{ host.subdomain }}.{{ host.domain.domain }}</b></a></td>
                    <td>{{ host.getIPv4 }} ({{ host.last_update_ipv4|timesince }})</td>
                    <td>{{ host.getIPv6 }} ({{ host.last_update_ipv6|timesince }})</td>
                    <td>{{ host.comment }}</td>
                </tr>
            {% empty %}
                <tr>No hosts yet.</tr>
            {% endfor %}
            </table>
        </div>
    </div>
    <hr>

    <div class="row">
        <div class="col-lg-4">
            <div class="well well-sm">
                <h3>Create a new Host</h3>
                <form method="post" action="">
                    {% csrf_token %}
                    {{ form|bootstrap }}
                    <button type="submit" class="btn btn-primary">Create</button>
                </form>
            </div>
        </div>
        <div class="col-lg-8">
            <div class="well well-sm">
                <h3>Your current IPs</h3>
                <p><b>Your IPv4:</b> <span class="ipv4addr">{{ request.session.ipv4 }}</span></p>
                <p><b>Your IPv6:</b> <span class="ipv6addr">{{ request.session.ipv6 }}</span></p>
                <p>Note: We try to get your IP addresses through a trick, by hosting two fake images:</p>
                <ol>
                    <li>on a IPv4-only server</li>
                    <li>on a IPv6-only server</li>
                </ol>
                <p>
                That way we can detect your IPs when your browser tries to load the images and
                associate them with your session.
                If we detected an IP address, we will update this information accordingly.
                </p>
            </div>
        </div>
    </div>
{% endblock %}
